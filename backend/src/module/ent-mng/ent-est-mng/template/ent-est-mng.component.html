<div class="enterpriseManage">
<div class="page-content-header icon-content-header-enterprise-manage">企业管理</div>
<div class="page-content">
	<div style="padding-bottom: 10px;">
	
		<div class="dropdown pull-right">			
			<button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
			更多操作
			<span class="caret"></span>
			</button>
			<ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
				<li class="hands"><a (click)="edit()">编辑</a></li>
				<li class="hands"><a (click)="modifyQuota()">修改配额</a></li>
				<li class="hands"><a (click)="setupCertInfo()">设置认证</a></li>
				<li class="hands"><a (click)="setupProduct()">设置产品</a></li>
				<li class="hands"><a (click)="setupAdmin()">设置管理员</a></li>
				<li class="hands"><a (click)="setupCerts()">管理认证源</a></li>
				<li class="hands"><a (click)="enable()">启用</a></li>
				<li class="hands"><a (click)="disable()">禁用</a></li>
				<li class="hands"><a (click)="delete()">删除</a></li>
			</ul>
		</div>
		<div class="pull-right">
			<input type="text" class="form-control searchbox" placeholder="搜索" [(ngModel)]="criteria" />
			<span class="glyphicon glyphicon-search searchbox-incon" (click)="search()"></span>
		</div>
		<button class="fox-cloud-button fox-cloud-button-green" (click)="create()">
			<span class="glyphicon glyphicon-edit"></span>
			<span class="icon-button-label icon-left-button-label">创建企业</span>
		</button>
	</div>
	<div class="table-container">
		<table class="table table-hover"> 
			<thead>
				<tr>
					<th class="fristTh">选择</th>
					<th>企业（租户）名称</th>
					<th>vCPU</th>
					<th>快照数量</th>
					<th>镜像数量</th>
					<th>产品数量</th>
					<th>订单数量</th>
					<th>vCPU配额使用率%</th>
					<th>存储配额使用率%</th>
					<th>存储配额使用率</th>				
					<th>状态</th>
				</tr>
			</thead>
			<tbody>
				<tr *ngFor="let item of entEstMng.Items; let i=index">
					<td>
						<input type="radio" class="fox-cloud-radio"   name="entItems" (change)="selectItem(i)" value="{{i}}">
					</td>
					<td (click)="checkEnterpriseInfo(item.enterpriseId);" class="hands">{{item.enterpriseName}}</td>
					<td>{{item.vcpuQuota }}</td>
					<td>{{item.snapshotQuota }}</td>
					<td>{{item.imageQuota }}</td>
					<td>{{item.productNumber }}</td>
					<td>{{item.orderNumber}}</td>
					<td>{{item.usedVCpuRate }}</td>
					<td>{{item.usedMemRate}}</td>
					<td>{{item.usedStorageRate}}</td>
					<td [ngClass]="{'validateInfo':item.status==1,'warnInfo':item.status!=1}">{{item.statusName}}</td>
				</tr>
			</tbody>
		</table>
	</div>
	<fc-pagination tp={{entEstMng.TotalPages}} (pf)="changePage($event)"></fc-pagination>
</div>
<fc-notice #notice ot="确认" (of)="okClicked()"></fc-notice>
<fc-confirm #confirm ot="确认" ct="取消" (of)="onConfirmed()"></fc-confirm>
<!-- 编辑企业 -->
<fc-popup #editEnt ot="确认" ct="取消" title="编辑企业" (of)="acceptEntModify()" (cf)="cancelEntModify()">
  <div class="dialogContent">
	<div class="row row-line-height">
		<div class="form-group">
			<div class="col-sm-4 form-control-title"><span class="asterisk">*</span>名称：</div>
			<div class="col-sm-4">
				<input type="text" class="form-control" placeholder="名称" [(ngModel)]="entEst.BasicInfo.name">
			</div>
		</div>
	</div>
	<div class="row row-line-height">
		<div class="form-group">
			<div class="col-sm-4 form-control-title">描述：</div>
			<div class="col-sm-4">
				<textarea class="form-control input-control" placeholder="描述" rows="4" [(ngModel)]="entEst.BasicInfo.description"></textarea>
			</div>
		</div>
	</div>
  </div>
</fc-popup>
<!-- 修改配额 -->

<fc-popup #editQuota ot="确认" ct="取消" title="修改配额" (of)="acceptQuotaModify()" (cf)="cancelQuotaModify()">
	
	<div class="dialogContent">
			<div class="row row-line-height">
				<div class="form-group">
					<div class="col-sm-6 form-control-title"><span class="asterisk">*</span>可使用vCPU数量：</div>
					<div class="col-sm-5">
					    <input type="number" class="form-control input-control" placeholder="可使用vCPU数量" [(ngModel)]="entEstResource.FirstItem.vcpuQuota">
					</div>
					<div class="col-sm-1">
					    <span class=" form-control-title mgl20">核</span>
					</div>
				</div>
			</div>
			<div class="row row-line-height">
				<div class="form-group">
					<div class="col-sm-6 form-control-title"><span class="asterisk">*</span>可使用内存数量：</div>
					<div class="col-sm-5">
					    <input type="number" class="form-control input-control" placeholder="可使用内存数量" [(ngModel)]="entEstResource.FirstItem.memroyQuota">
					</div>
					<div class="col-sm-1">
					    <span class=" form-control-title mgl20">GB</span>
					</div>
				</div>
			</div>
			<div class="row row-line-height">
				<div class="form-group">
					<div class="col-sm-6 form-control-title"><span class="asterisk">*</span>可创建物理机数量：</div>
					<div class="col-sm-5">
					<input type="number" class="form-control input-control" placeholder="可创建物理机数量" [(ngModel)]="entEstResource.FirstItem.physicalQuota">
					</div>
					<div class="col-sm-1">
					    <span class=" form-control-title mgl20" >台</span>
					</div>
				</div>
			</div>
			<div class="row row-line-height">
				<div class="form-group">
					<div class="col-sm-6 form-control-title"><span class="asterisk">*</span>可使用存储额度：</div>
					<div class="col-sm-5">
						<input type="number" class="form-control input-control" placeholder="可使用存储额度" [(ngModel)]="entEstResource.FirstItem.storageQuota">
					</div>
					<div class="col-sm-1">
					    <span class=" form-control-title mgl20">GB</span>
					</div>
				</div>
			</div>
			<div class="row row-line-height">
				<div class="form-group">
					<div class="col-sm-6 form-control-title"><span class="asterisk">*</span>可创建快照数量：</div>
					<div class="col-sm-5">
						<input type="number" class="form-control input-control" placeholder="可创建快照数量" [(ngModel)]="entEstResource.FirstItem.snapShotQuota">
					</div>
					<div class="col-sm-1">
					    <span class=" form-control-title mgl20">个</span>
					</div>
				</div>
			</div>
			<div class="row row-line-height">
				<div class="form-group">
					<div class="col-sm-6 form-control-title"><span class="asterisk">*</span>可创建镜像数量：</div>
					<div class="col-sm-5">
						<input type="number" class="form-control input-control" placeholder="可创建镜像数量" [(ngModel)]="entEstResource.FirstItem.imageQuota">
					</div>
					<div class="col-sm-1">
					    <span class=" form-control-title mgl20" >台</span>
					</div>
				</div>
			</div>
			<div class="row row-line-height">
				<div class="form-group">
					<div class="col-sm-6 form-control-title"><span class="asterisk">*</span>可创建浮动IP数量：</div>
					<div class="col-sm-5">
						<input type="number" class="form-control input-control" placeholder="可创建浮动IP数量：" [(ngModel)]="entEstResource.FirstItem.floatIpQuota">
					</div>
					<div class="col-sm-1">
					    <span class=" form-control-title mgl20" >个</span>
					</div>
				</div>
			</div>
	</div><!--变更-->

</fc-popup>

<!-- 设置认证 -->
<fc-popup #setupCert ot="确认" ct="取消" title="设置认证"  (of)="acceptCertModify()" (cf)="cancelCertModify()">
	
 <div class="dialogContent">
	<div class="row row-line-height">
		<div class="form-group">
			<div class="col-sm-4 form-control-title"><span class="asterisk">*</span>URL地址：</div>
			<div class="col-sm-4">
				<input type="text" class="form-control input-control" placeholder="URL地址" [(ngModel)]="entEst.BasicInfo.certUrl">
			</div>
		</div>
	</div>
	<div class="row row-line-height">
		<div class="form-group">
			<div class="col-sm-4 form-control-title"><span class="asterisk">*</span>用户名：</div>
			<div class="col-sm-4">
				<input type="text" class="form-control input-control" placeholder="用户名" [(ngModel)]="entEst.ResourceQuota.contactorName">
			</div>
		</div>
	</div>
	<div class="row row-line-height">
		<div class="form-group">
			<div class="col-sm-4 form-control-title"><span class="asterisk">*</span>密码：</div>
			<div class="col-sm-4">
				<input type="password" class="form-control input-control" placeholder="密码" [(ngModel)]="entEst.ResourceQuota.password">
			</div>
		</div>
	</div>
  <div class="testPanel">
      <button class="fox-cloud-button-lg fox-cloud-button-green" (click)="test()">
		<span class="icon-button-label">测试</span>
	</button><span class="validateInfo">AD认证测试通过</span>
  </div>
</div>
</fc-popup>
</div>
