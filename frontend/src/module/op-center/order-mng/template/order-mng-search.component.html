<fc-notice #notice ot="确认"></fc-notice>
<div class="OrderSearch">	
	<div class="page-content-header ">订单查询</div>
	<div class="page-content">
		<div class="table-container">
			<div class="">
				<div class="input-group col-md-2 float-left mgr20">
   					 <input class="form-control" placeholder="输入关键字搜索" type="email">
    				 <div class="input-group-addon pointer"><span class="glyphicon glyphicon-search" (click)="search()"></span></div>
				</div>
						
				<button class="button-gray-gradient  form-control-title ">重&nbsp;&nbsp;&nbsp;&nbsp;置</button>
			</div>
			<table class="table  mgb20 mgt20">
				<tbody>
					<tr class="none-border">				
						<td class="none-border">
							<span class="float-left form-control-title">部门:</span>
							<div class="dropdown float-left">
								<select class="form-control  fix-width-120" [(ngModel)]="_param.organization">
									<option class="hands" [value]="null">所有部门</option>
									<option class="hands" *ngFor="let item of _departmentLoader.Items" [value]="item.id">{{item.name}}</option>
								</select>
							</div>
						</td>
						<td class="none-border">
							<span class="float-left  form-control-title">提交者:</span>
							<div class="dropdown float-left">
								<select class="form-control  fix-width-120" [(ngModel)]="_param.buyerId">
									<option class="hands" [value]="null">所有用户</option>
									<option class="hands" *ngFor = "let item of _buyerLoader.Items" [value] = "item.id">{{item.name}}</option>
								</select>
							</div>
						</td>
						<td class="none-border">
							<div class="mgt-10">
								<span class="mgt15  form-control-title float-left">提交时间：</span>
								<div class="dropdown float-left">			
									<date-picker (dateChanged)="onCreateTimeChange($event)"></date-picker>
								</div>
								<span class="mgl10 mgt15 float-left">—</span>
								<div class="dropdown float-left">			
									<date-picker (dateChanged)="onExpireTimeChange($event)"></date-picker>
								</div>
							</div>
						</td>
						<td class="none-border ">
							<span class="float-left  form-control-title" >
							订单状态:</span>
							<div class="dropdown float-left">
								<select class="form-control" [(ngModel)]="_param.status">
									<option class="hands" [value]="null">成功</option>
									<option class="hands" *ngFor="let item of _orderStatus.Items" [value]="item.value">{{item.displayValue}}</option>
								</select>
							</div>
						</td>
						<td class="none-border ">
							<span class="float-left  form-control-title" >
							产品类型:</span>
							<div class="dropdown float-left">
								<select class="form-control" [(ngModel)]="_param.serviceType">
									<option class="hands" [value]="null">所有</option>
									<option class="hands" *ngFor="let item of _productTypeLoader.Items" [value]="item.value">{{item.displayValue}}</option>
								</select>
							</div>
						</td>
					</tr>
					
				</tbody>
			</table>	
		</div>
		<div class="mgb20  form-control-title float-left">当前查询到<span class="font-green">{{_orderLoader.Items.length}}</span>个订单，订单列表如下：</div>
			<div class="table-container">
			<table class="table table-all-boder">
				<thead>	
					<tr>
						<th>编号</th>
						<th>订单号</th>
						<th>产品类型</th>
						<th>订单类型</th>
						<th>订单状态</th>
						<th>费用</th>
						
						<th>提交时间</th>
						<th>完成时间</th>
						<th>提交者</th>
						<th>所属部门</th>
						<th>操作</th>
					</tr>			
				</thead>
				<tbody>
					<tr *ngFor="let item of _orderLoader.Items;let i = index;">
						<td>{{i}}</td>
						<td>{{item.orderNo}}</td>
						<td>{{item.serviceTypeName}}</td>
						<td>{{item.orderTypeName}}</td>
						<td>{{item.statusName}}</td>
						<td>一次性费用：￥{{item.oncePrice}}<br>费用：￥{{item.price}}
						</td>
						<td>{{item.submitTime}}</td>
						<td>{{item.EndTime}}</td>
						<td>{{item.submitPeople}}</td>
						<td>{{item.departmentName}}</td>
						<td class="left-td">
							<button class="mgr20  button-gray-gradient" (click)="showDetail(item.orderId)">详&nbsp;&nbsp;&nbsp;情</button>
							<button class="button-gray-gradient" data-toggle="modal" data-target="#cancelOrder">撤&nbsp;&nbsp;&nbsp;单</button>
							
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<fc-pagination tp={{_orderLoader.TotalPages}} (pf)="changePage($event)"></fc-pagination>
	</div>


	<!--详情-->
	<div class="modal fade" id="searchDetail" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		  	<div class="modal-dialog" role="document">
				<div class="modal-content">
				  	<div class="modal-header">
					 	<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">订单号：2370537538484773</h4>
				  	</div>
				 	<div class="modal-body"> 
			          <!--<account-mng-cr-local></account-mng-cr-local>-->
			          <order-mng-searchDetail [detail]="_orderDetail"></order-mng-searchDetail>
			         
					</div>
			      
				  	<div class="modal-footer">
				  	</div>
				
		  	</div>
		</div>
	</div>

</div><!--ending-->