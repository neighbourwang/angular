<div class="page-content cloud_host_order">
	<div class="col-md-9">
		<h1 class="page-content-header">创建云主机</h1>
		
		<ul class="left-box">
			<li>
				<div class="col-md-1 li-title">
					<p><span class="icon-location"></span><br>区域</p>
				</div>
				<div class="col-md-12 li-content">
					<div class="col-md-2 content-title">云平台</div>
					<div class="col-md-10 btn-group" data-toggle="buttons">
						<label *ngFor="let value of configs.platform.valueList;" (click)="sendModule.platform = value" class="btn btn-default" [ngClass]="{'active': sendModule.platform.id === value.id}">
							<input type="radio" name="location" autocomplete="off"> {{ value.displayName }}
						</label>
					</div>
					<div class="col-md-2"></div>
					<div class="col-md-10 text-tip">不同区域之间的产品内网不互通；订购后不支持更换区域，请谨慎选择！</div>
					<div class="col-md-2 content-title">可用区</div>
					<div class="col-md-10 btn-group" data-toggle="buttons">
						<label 
							*ngFor="let value of configs.zone.mapValueList[sendModule.platform.id];" 
							(click)="sendModule.zone = value" 
							class="btn btn-default" [ngClass]="{'active': sendModule.zone.id === value.id}">
							<input type="radio" name="zone" autocomplete="off"> {{ value.displayName }}
						</label>
					</div>
				</div>
			</li>
			<li>
				<div class="col-md-1 li-title">
					<p><span class="icon-network"></span><br>网络</p>
				</div>
				<div class="col-md-12 li-content">
					<div class="col-md-2 content-title">网络类型</div>
					<div class="col-md-10">
						<select [(ngModel)]="sendModule.networktype" (change)="sendModule.networktype = value" class="form-control">
							<option
							 *ngFor="let value of configs.networktype.valueList;"
							 [ngValue]="value" >{{ value.displayName }}</option>
						</select>
					</div>
					<div class="col-md-2"></div>
					<div class="col-md-10 text-tip">请选择您需要的子网网段</div>
					<div class="col-md-2 content-title">安全组</div>
					<div class="col-md-10">
						<select [(ngModel)]="sendModule.securitygroup" (change)="sendModule.securitygroup = value" class="form-control">
							<option
							 *ngFor="let value of configs.securitygroup.valueList;"
							 [ngValue]="value" >{{ value.displayName }}</option>
						</select>
					</div>
					<div class="col-md-2"></div>
					<div class="col-md-10 text-tip">如果您不知道如何选择，请咨询管理员</div>
				</div>
			</li>
			<li>
				<div class="col-md-1 li-title">
					<p><span class="icon-specifications"></span><br>实例规格</p>
				</div>
				<div class="col-md-12 li-content">
					<div class="col-md-2 content-title">CPU</div>
					<div class="col-md-10 btn-group" data-toggle="buttons">
						<label *ngFor="let value of configs.cpu.valueList;" (click)="sendModule.cpu = value;" class="btn btn-default" [ngClass]="{'active': sendModule.cpu.id === value.id}">
							<input type="radio" name="cpu" autocomplete="off"> {{ value.displayName }}
						</label>
					</div>
					<div class="col-md-2 content-title">内存</div>
					<div class="col-md-10 btn-group" data-toggle="buttons">
						<label *ngFor="let value of configs.mem.valueList;" (click)="sendModule.mem = value;" class="btn btn-default" [ngClass]="{'active': sendModule.mem.id === value.id}">
							<input type="radio" name="mem" autocomplete="off"> {{ value.displayName }}
						</label>
					</div>
				</div>
			</li>
			<li>
				<div class="col-md-1 li-title">
					<p><span class="icon-host"></span><br>云主机源</p>
				</div>
				<div class="col-md-12 li-content">
					<div class="col-md-2 content-title">启动源</div>
					<div class="col-md-10">
						<select [(ngModel)]="sendModule.startupsource" (change)="sendModule.startupsource = value" class="form-control">
							<option
							 *ngFor="let value of configs.startupsource.valueList;"
							 [ngValue]="value" >{{ value.displayName }}</option>
						</select>
					</div>
					<div class="col-md-2"></div>
					<div class="col-md-10 text-tip">公共镜像即基础操作系统，自定义镜像为企业根据基础操作系统做过额外配置或优化后的操作系统</div>
					<div class="col-md-2 content-title">镜像类型</div>
					<div class="col-md-10 btn-group" data-toggle="buttons">
						<label *ngFor="let value of configs.imagetype.valueList;" (click)="sendModule.imagetype = value;" class="btn btn-default" [ngClass]="{'active': sendModule.imagetype.id === value.id}">
							<input type="radio" name="imagetype" autocomplete="off"> {{ value.displayName }}
						</label>
					</div>
					<div class="col-md-2 content-title">镜像列表</div>
					<div class="col-md-10">
						<select [(ngModel)]="sendModule.os" (change)="sendModule.os = value" class="form-control">
							<option
							 *ngFor="let value of configs.os.valueList;"
							 [ngValue]="value" >{{ value.displayName }}</option>
						</select>
					</div>
				</div>
			</li>
			<li>
				<div class="col-md-1 li-title">
					<p><span class="icon-disk"></span><br>储存</p>
				</div>
				<div class="col-md-12 li-content">
					<div class="col-md-12 no-padding mb20">
						<div class="col-md-2 content-title">启动盘</div>
						<div class="col-md-10 no-padding">
							<div class="col-md-3 no-padding">
								<label class="btn btn-default" *ngIf="!sendModule.zone.id">请先选择可用区</label>
								<select 
									*ngIf="sendModule.zone.id" 
									[(ngModel)]="sendModule.bootstorage" 
									(change)="sendModule.bootstorage = value" class="form-control">
										<option
										*ngFor="let value of configs.bootstorage.mapValueList[sendModule.zone.id];" 
										[ngValue]="value" >{{ value.displayName }}</option>
								</select>
							</div>
							<div class="col-md-1 content-title2">容量</div>
							<div class="col-md-2 no-padding">
								<select class="form-control">
									<option selected>20</option>>
								</select>
								<!-- <select [(ngModel)]="sendModule.bootsize" (change)="sendModule.bootsize = value" class="form-control">
									<option
									*ngFor="let value of configs.bootsize.valueList;"
									[ngValue]="value" >{{ value.displayName }}</option>
								</select> -->
							</div>
							<div class="col-md-6 content-title2">GB</div>
						</div>
					</div>
					<div class="col-md-12 no-padding">
						<div class="col-md-2 content-title">数据盘</div>
						<div class="col-md-10 no-padding data-disk">
							<div class="col-md-12 no-padding mb10">
								<div class="col-md-3 no-padding">
									<!-- <select [(ngModel)]="sendModule.storage" (change)="sendModule.storage = value" class="form-control">
										<option
										*ngFor="let value of configs.storage.valueList;"
										[ngValue]="value" >{{ value.displayName }}</option>
									</select> -->
									<select class="form-control">
										<option selected>高速I/O</option>>
									</select>
								</div>
								<div class="col-md-1 content-title2">容量</div>
								<div class="col-md-2 no-padding">
									<select class="form-control">
										<option selected>20</option>>
									</select>
									<!-- <select [(ngModel)]="sendModule.storagesize" (change)="sendModule.storagesize = value" class="form-control">
										<option
										*ngFor="let value of configs.storagesize.valueList;"
										[ngValue]="value" >{{ value.displayName }}</option>
									</select> -->
									<!--<div class="btn-group input-step-compontent">
										<button type="button" class="btn btn-default col-md-3"><span class="glyphicon glyphicon-minus"></span></button>
										<input type="text" class="form-control" value="20">
										<button type="button" class="btn btn-default clickable"><span class="glyphicon glyphicon-plus"></span></button>
									</div>-->
								</div>
								<div class="col-md-1 content-title2">GB</div>
								<div class="col-md-3 text-right">
									<!--<button class="btn button-gray-gradient"><span class="glyphicon glyphicon-remove"></span> 删除</button>-->
								</div>
							</div>
						</div>
						<div class="col-md-2 content-title"></div>
						<div class="col-md-10 add-disk-box">
							<div class="col-md-3 content-title2 no-padding">
								<button class="btn button-gray-gradient button-icon"><span class="glyphicon glyphicon-plus"></span> 增加数据盘</button>
							</div>
							<div class="col-md-7 no-padding disk-tip">一共可以增加<span class="font-green">3</span>块，还可以增加<span class="font-orange">2</span>块</div>
						</div>
					</div>
				</div>
			</li>
			<li>
				<div class="col-md-1 li-title">
					<p><span class="icon-password"></span><br>密码设置</p>
				</div>
				<div class="col-md-12 li-content li-password">
					<div class="col-md-12 no-padding mb15">
						<div class="col-md-2 content-title">设置方式</div>
						<div class="col-md-4 no-padding btn-group" data-toggle="buttons">
							<label class="btn btn-default active" (click)="setPassword = true">
								<input type="radio" name="mirror" autocomplete="off" checked> 立即设置
							</label>
							<label class="btn btn-default" (click)="setPassword = false">
								<input type="radio" name="mirror" autocomplete="off"> 模板自带密码
							</label>
						</div>
						<div class="col-md-5 no-padding text-tip">请牢记您所设置的密码，如遗忘可登录ESC控制台重置密码。</div>
					</div>

					<div class="col-md-12 no-padding mb20">
						<div class="col-md-2 content-title">用户名</div>
						<div class="col-md-10 user-root">root</div>
					</div>

					<div class="col-md-12 no-padding mb20" *ngIf="setPassword">
						<div class="col-md-2 content-title">登录密码</div>
						<div class="col-md-4 no-padding">
							<input type="password" [(ngModel)]="sendModule.password.value" class="form-control" placeholder="请输入主机密码">
						</div>
						<div class="col-md-5 no-padding text-tip">建议复杂度：8-30个字符，且同时包括三项（大写字母，小写字母，数字和特殊符号）</div>
					</div>

					<div class="col-md-12 no-padding mb20" *ngIf="setPassword">
						<div class="col-md-2 content-title">确认密码</div>
						<div class="col-md-4 no-padding" 
							[ngClass]="{'has-error': passwordShadow !== sendModule.password.value}">

							<input type="password" class="form-control"  [(ngModel)]="passwordShadow"  placeholder="请再次输入主机密码">
						</div>
					</div>

					<div class="col-md-12 no-padding mb20">
						<div class="col-md-2 content-title">实例名称</div>
						<div class="col-md-4 no-padding">
							<input type="text" [(ngModel)]="sendModule.instancename.value" class="form-control" placeholder="如不填写，则系统自动生成">
						</div>
						<div class="col-md-5 no-padding text-tip">2-68个字符，以大小写字母或者中文开头，可包含数字，“.”, "-", "_"</div>
					</div>
				</div>
			</li>
			<li>
				<div class="col-md-1 li-title">
					<p><span class="icon-amount"></span><br>购买量</p>
				</div>
				<div class="col-md-12 li-content">
					<div class="col-md-12 no-padding mb20">
						<div class="col-md-2 content-title">购买时长</div>
						<div class="col-md-2 no-padding mr10">
							<select [disabled]="timeForever" [(ngModel)]="sendModule.timelineunit" (change)="sendModule.timelineunit = value" class="form-control">
								<option
								*ngFor="let value of configs.timelineunit.valueList;"
								[ngValue]="value" >{{ value.displayName }}</option>
							</select>
						</div>
						<div class="col-md-2 no-padding mr10">
							<input [disabled]="timeForever" [(ngModel)]="sendModule.timeline.value" type="text" class="form-control">
						</div>
						<div class="col-md-2 no-padding">
							<!-- <label class="btn btn-default" (click)="timeForever = timeForever ? false : true" [ngClass]="{'active': timeForever}">
								永久
							</label> -->
						</div>
					</div>

					<div class="col-md-12 no-padding mb20">
						<div class="col-md-2 content-title">购买量</div>
						<div class="col-md-2 no-padding mr10">
							<select [(ngModel)]="payLoad.quality" (change)="payLoad.quality = value" class="form-control">
								<option [ngValue]="1">1台</option>
								<option [ngValue]="2">2台</option>
								<option [ngValue]="3">3台</option>
								<option [ngValue]="4">4台</option>
								<option [ngValue]="5">5台</option>
							</select>
							<!--<div class="btn-group input-step-compontent">
								<button type="button" class="btn btn-default col-md-3"><span class="glyphicon glyphicon-minus"></span></button>
								<input type="text" class="form-control" value="20">
								<button type="button" class="btn btn-default clickable"><span class="glyphicon glyphicon-plus"></span></button>
							</div>-->
						</div>
						<!--<div class="col-md-2 no-padding lh32">台</div>-->
					</div>
				</div>
			</li>
		</ul>
	</div>
	 <!-- [ngClass]="{'right-fixed' : rightFixed}" (window:scroll)="onScroll($event)" -->
	<div class="col-md-3 no-padding right-box">
		<div class="col-md-12 no-padding title-box">
			<div class="col-md-6"><button class="btn button-gray-gradient"><span class="icon-shopping"></span>查看购物车 0</button></div>
			<div class="col-md-6"><button class="btn button-gray-gradient"><span class="icon-delete"></span>清空购物车</button></div>
		</div>
		<div class="col-md-12 content-box">
			<h3 class="boder-gray-bottom-title">当前配置</h3>
			<h4 class="cloud-title font-green">区域</h4>
			<p class="cloud-p">云平台: {{ sendModule.platform ? sendModule.platform.displayName : "" }}</p>
			<p class="cloud-p">可用区: {{ sendModule.zone ? sendModule.zone.displayName : "" }}</p>
			<h4 class="cloud-title font-green">网络</h4>
			<p class="cloud-p">网络类型: {{ sendModule.networktype ? sendModule.networktype.displayName : "" }}</p>
			<p class="cloud-p">安全组: {{ sendModule.securitygroup ? sendModule.securitygroup.displayName : "" }}</p>
			<h4 class="cloud-title font-green">实例规格</h4>
			<p class="cloud-p">CPU: {{ sendModule.cpu ? sendModule.cpu.displayName : "" }}</p>
			<p class="cloud-p">内存: {{ sendModule.mem ? sendModule.mem.displayName : "" }}</p>
			<h4 class="cloud-title font-green">云主机源</h4>
			<p class="cloud-p">启动源: {{ sendModule.startupsource ? sendModule.startupsource.displayName : "" }}</p>
			<p class="cloud-p">镜像类型: {{ sendModule.imagetype ? sendModule.imagetype.displayName : "" }}</p>
			<p class="cloud-p">镜像名称: {{ sendModule.os ? sendModule.os.displayName : "" }}</p>
			<h4 class="cloud-title font-green">储存</h4>
			<p class="cloud-p">启动盘: {{ sendModule.bootstorage ? sendModule.bootstorage.displayName : "" }} / {{ sendModule.bootsize ? sendModule.bootsize.displayName : "" }}</p>
			<!-- <p class="cloud-p">数据盘: {{ sendModule.stroage ? sendModule.stroage.displayName : "" }} / {{ sendModule.storagesize ? sendModule.storagesize.displayName : "" }}</p> -->
			<h4 class="cloud-title font-green">购买量</h4>
			<p class="cloud-p">购买时长: {{ sendModule.timelineunit ? sendModule.timelineunit.displayName : ""}} / {{ sendModule.timeline ? sendModule.timeline.value : ""}}</p>
			<p class="cloud-p">购买量: {{payLoad.quality}}台</p>
			<div class="cloud-line"></div>
			<h4 class="cloud-title">费用总计：<font class="font-orange">¥{{ this.sendModule.timeline ? this.parseInt((this.parseInt(this.sendModule.cpu.displayName)*20 + ((this.parseInt(this.sendModule.mem.displayName) < 50) ? this.parseInt(this.sendModule.mem.displayName)*10 : this.parseInt(this.sendModule.mem.displayName)*0.1 ) + 20 +this.parseInt(this.sendModule.timeline.value ? this.sendModule.timeline.value*1.21 : 1 ))*this.parseInt(this.payLoad.quality)*100)/100 : 0 }}</font></h4>
			<div class="col-md-12 colud-order-button">
				<div class="col-md-6"><button (click)="buyNow()" class="btn button-orange-deep">立即购买</button></div>
				<div class="col-md-6"><button class="btn button-orange-light">加入购物车</button></div>
			</div>
		</div>
	</div>
</div>
